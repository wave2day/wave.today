/* =========================================================
   QR MODULE (orb + flip overlay + whitelabel glass QR)
   CLEANED VERSION
   - keeps: orb behaviour, flip, open/close
   - fixes: label fits card, stays centered, keeps whitelabel look
   - removes: red debug outline + duplicated/contradicting patches
   ========================================================= */

/* ===== Base / anti-callout ===== */
#qrWrap{
  height:100%;
  margin:0;
  background: transparent;
  -webkit-touch-callout:none;
  -webkit-user-select:none;
  user-select:none;
}
#wtOrb, #wtOrb * , #wtOverlay, #wtCard, #wtCard *{
  -webkit-touch-callout:none;
  -webkit-user-select:none;
  user-select:none;
}
#wtOrb img, .frontImg, #wtCard img{ pointer-events:none; }
#wtOrb.wt-dragging{ cursor:grabbing; opacity:1 !important; }
#wtOrb:not(.wt-dragging){ cursor:grab; }

/* ===== Orb (sticker) ===== */
#wtOrb{
  position:fixed;
  top:calc(10px + 96px + env(safe-area-inset-top));
  left:10px;
  width:86px;
  height:86px;
  z-index:999999;
  -webkit-tap-highlight-color:transparent;
  filter:drop-shadow(0 10px 22px rgba(0,0,0,.45));
  touch-action:pan-y;
}
@media (min-width:900px){
  #wtOrb{ width:110px; height:110px; top:16px; left:16px; }
}
#wtOrb img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  opacity:.95;
  -webkit-user-drag:none;
}

/* ===== Overlay flip card (center) ===== */
#wtOverlay{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  z-index:1000000;
  pointer-events:none;
  opacity:0;
  transition:opacity 180ms ease;
}
#wtOverlay.is-open{
  display:grid;
  opacity:1;
  pointer-events:auto;
}
#wtOverlay .backdrop{ position:absolute; inset:0; background:transparent; }

/* CARD SIZE: this is the “red square” you were testing */
#wtCard{
  --cardSize: clamp(220px, 78vw, 280px);
  width: var(--cardSize);
  height: var(--cardSize);
  aspect-ratio:1;
  position:relative;
  perspective:1100px;
  pointer-events:auto;
  transform:translateZ(0);
}

#wtInner{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  transition:transform 520ms cubic-bezier(.2,.8,.2,1);
}
#wtOverlay.is-open #wtInner{ transform:rotateY(180deg); }

.wtFace{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
}
.wtFront{ border-radius:22px; }
.wtFront .frontImg{
  width:56%;
  height:56%;
  border-radius:20px;
  display:block;
  filter:drop-shadow(0 18px 34px rgba(0,0,0,.42));
  opacity:.95;
}
.wtBack{ transform:rotateY(180deg); }

/* =========================================================
   WHITELABEL GLASS LABEL — RESPONSIVE BUT 1:1 LOOK
   - reference tuned for 360px
   - scale all “px effects” with --s
   ========================================================= */

:root{
  --refOuter: 360px;
  --innerRatio: .78;
  --coreRk: 1.55;

  --glassClearA: rgba(255,255,255,.14);
  --glassClearB: rgba(255,255,255,.08);
  --glassMilkA:  rgba(255,255,255,.10);
  --glassMilkB:  rgba(255,255,255,.12);

  --topRimFade: 30%;
  --botRim1: rgba(255,255,255,.74);
  --botRim2: rgba(255,255,255,.30);

  --bleedA: .085;
  --bleedB: .040;

  --pressTimeIn: 110ms;
  --pressTimeOut: 190ms;
}

#wtCard{
  --sqOuter: var(--cardSize);
  --s: calc(var(--sqOuter) / var(--refOuter));
  --sqR: calc(34px * var(--s));
  --glassRingThickness: calc(13px * var(--s));
  --glassRimBlur: calc(1.05px * var(--s));
  --pressY: calc(3px * var(--s));
}

.glassSquare{
  --rimTint: 170, 190, 255;
  --bleedX: 78%;
  --bleedY: 86%;

  --gap: calc(var(--sqOuter) * (1 - var(--innerRatio)) / 2);
  --coreR: calc(var(--sqR) - (var(--gap) * var(--coreRk)));

  width: 100%;
  height: 100%;
  border-radius: var(--sqR);
  position:relative;
  display:grid;
  place-items:center;
  isolation:isolate;

  background:
    radial-gradient(120% 140% at 50% 62%, var(--glassMilkA), transparent 62%),
    radial-gradient(120% 160% at 50% 92%, var(--glassMilkB), transparent 58%),
    radial-gradient(120% 140% at 28% 20%, var(--glassClearA), transparent 55%),
    radial-gradient(140% 160% at 70% 74%, var(--glassClearB), transparent 60%),
    rgba(255,255,255,.08);

  box-shadow:
    inset 0 calc(18px * var(--s)) calc(26px * var(--s)) rgba(0,0,0,.24),
    inset 0 calc(-22px * var(--s)) calc(30px * var(--s)) rgba(255,255,255,.22),
    0 calc(26px * var(--s)) calc(54px * var(--s)) rgba(0,0,0,.20);

  backdrop-filter: blur(calc(6px * var(--s)));
  -webkit-backdrop-filter: blur(calc(6px * var(--s)));

  transition: filter var(--pressTimeOut) ease;
}

.glassSquare::before{
  content:"";
  position:absolute;
  inset: calc(12px * var(--s));
  border-radius: calc(var(--sqR) - calc(6px * var(--s)));
  pointer-events:none;
  z-index:1;

  background:
    radial-gradient(70% 90% at 16% 18%,
      rgba(255,255,255,.42) 0%,
      rgba(255,255,255,.18) 35%,
      transparent 72%),
    radial-gradient(44% 60% at 26% 30%,
      rgba(255,255,255,.18) 0%,
      transparent 72%);

  filter: blur(calc(1.35px * var(--s)));
  opacity:.95;
}

.glassSquare::after{
  /* MASK-FREE rim fallback for mobile browsers where mask-composite can drop the rim */
  content:"";
  position:absolute;
  inset:0;
  border-radius: var(--sqR);
  pointer-events:none;
  z-index:2;

  /* Rim: subtle border + inner/outer sheen */
  border: calc(1px * var(--s)) solid rgba(255,255,255,.26);

  box-shadow:
    0 0 calc(18px * var(--s)) rgba(255,255,255,.10),
    inset 0 calc(10px * var(--s)) calc(16px * var(--s)) rgba(0,0,0,.16),
    inset 0 calc(-14px * var(--s)) calc(18px * var(--s)) rgba(255,255,255,.22),
    inset calc(10px * var(--s)) 0 calc(16px * var(--s)) rgba(170,190,255,.06),
    inset calc(-10px * var(--s)) 0 calc(16px * var(--s)) rgba(170,190,255,.04);

  background:
    radial-gradient(72% 120% at var(--bleedX) var(--bleedY),
      rgba(var(--rimTint), var(--bleedA)) 0%,
      rgba(var(--rimTint), var(--bleedB)) 28%,
      transparent 68%),
    radial-gradient(140% 120% at 50% 120%,
      var(--botRim1) 0%,
      var(--botRim2) 22%,
      transparent 52%),
    radial-gradient(170% 120% at 50% -38%,
      rgba(0,0,0,.30) 0%,
      rgba(0,0,0,.12) 14%,
      transparent var(--topRimFade));
  opacity:.98;
  filter: blur(calc(.5px * var(--s)));
}

.qr_pressGlow

.qr_pressGlow{
  position:absolute;
  inset: calc(-28px * var(--s));
  border-radius: calc(var(--sqR) + calc(14px * var(--s)));
  pointer-events:none;
  opacity:0;
  filter: blur(calc(12px * var(--s)));
  transform: scale(.995);
  transition: opacity var(--pressTimeOut) ease, transform var(--pressTimeOut) ease;
  z-index:0;

  background:
    radial-gradient(86% 86% at 70% 74%,
      rgba(255,255,255,.18) 0%,
      rgba(255,255,255,.10) 30%,
      transparent 65%),
    radial-gradient(120% 100% at 50% 120%,
      rgba(255,255,255,.16) 0%,
      transparent 55%);
}

.qr_coreSquare{
  width:  calc(var(--sqOuter) - (2 * var(--gap)));
  height: calc(var(--sqOuter) - (2 * var(--gap)));
  border-radius: max(calc(14px * var(--s)), var(--coreR));

  position:relative;
  z-index:3;
  border:0;
  padding:0;
  cursor:pointer;

  outline:none !important;
  -webkit-tap-highlight-color: transparent;
  user-select:none;

  --c1:#ffffff;
  --c2:#f1f1f6;
  --c3:#d9d9e2;

  background:
    radial-gradient(120% 140% at 28% 18%, rgba(255,255,255,.20), transparent 55%),
    linear-gradient(180deg, var(--c1), var(--c2) 55%, var(--c3));

  box-shadow:
    0 calc(18px * var(--s)) calc(26px * var(--s)) rgba(0,0,0,.18),
    inset 0 calc(16px * var(--s)) calc(22px * var(--s)) rgba(0,0,0,.16),
    inset 0 calc(-14px * var(--s)) calc(20px * var(--s)) rgba(255,255,255,.18),
    inset 0 0 0 1px rgba(0,0,0,.16);

  transform: translateY(0);
  transition:
    transform var(--pressTimeOut) cubic-bezier(.2,.8,.2,1),
    box-shadow var(--pressTimeOut) ease,
    filter var(--pressTimeOut) ease;
}

.qr_coreSquare::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  pointer-events:none;
  background:
    radial-gradient(120% 140% at 50% 50%,
      transparent 60%,
      rgba(0,0,0,.32) 100%);
  mix-blend-mode: soft-light;
  opacity:.96;
}

.qr_coreSquare::after{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: inherit;
  pointer-events:none;

  background:
    radial-gradient(140% 120% at 50% 120%,
      rgba(255,255,255,.70) 0%,
      rgba(255,255,255,.30) 26%,
      transparent 56%),
    radial-gradient(170% 120% at 50% -38%,
      rgba(0,0,0,.34) 0%,
      rgba(0,0,0,.14) 16%,
      transparent 34%);

  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  padding: calc(6px * var(--s));
  filter: blur(calc(.78px * var(--s)));
  opacity:.95;
  mix-blend-mode: normal;
}

.qrWrap{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  pointer-events:none;
  z-index:10;
}
.qrWrap .qrSvg{
  width:88%;
  height:88%;
  display:block;
  shape-rendering: crispEdges;
}

/* hover / press */
.qr_coreSquare:hover{
  transform: translateY(calc(-1px * var(--s)));
  box-shadow:
    0 calc(22px * var(--s)) calc(30px * var(--s)) rgba(0,0,0,.20),
    inset 0 calc(14px * var(--s)) calc(20px * var(--s)) rgba(0,0,0,.14),
    inset 0 calc(-14px * var(--s)) calc(20px * var(--s)) rgba(255,255,255,.18),
    inset 0 0 0 1px rgba(0,0,0,.16);
}
.glassSquare:has(.qr_coreSquare:active){
  filter: brightness(.985);
  transition: filter var(--pressTimeIn) ease;
}
.glassSquare:has(.qr_coreSquare:active) .qr_pressGlow{
  opacity:1;
  transform: scale(1.01);
  transition: opacity var(--pressTimeIn) ease, transform var(--pressTimeIn) ease;
}
.qr_coreSquare:active{
  transform: translateY(var(--pressY));
  transition:
    transform var(--pressTimeIn) cubic-bezier(.2,.8,.2,1),
    box-shadow var(--pressTimeIn) ease,
    filter var(--pressTimeIn) ease;
  box-shadow:
    0 calc(10px * var(--s)) calc(18px * var(--s)) rgba(0,0,0,.16),
    inset 0 calc(20px * var(--s)) calc(26px * var(--s)) rgba(0,0,0,.20),
    inset 0 calc(-10px * var(--s)) calc(16px * var(--s)) rgba(255,255,255,.12),
    inset 0 0 0 1px rgba(0,0,0,.16);
  filter: brightness(.995) saturate(.98);
}

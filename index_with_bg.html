<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>wave.today</title>

  <link rel="stylesheet" href="css/share.css?v=1">
  <link rel="stylesheet" href="css/qr.css?v=1">
  <link rel="stylesheet" href="css/extra.css?v=1">

  <!-- Debug guard: kdyby ti něco globálně schovalo IMG, tohle ho vytáhne zpět -->
  <style>
    #wtOrb img, #wtOverlay img { opacity: 1 !important; display: block !important; visibility: visible !important; }
  </style>

  <!-- ===== WT BACKGROUND MODULE ===== -->
  <style>
    /* Background module (integrace). Pozor: NEblokovat scroll. */
    :root{
      --glass-blur: 11px;
      --glass-milk: 0.045;
      --grain-op: 0.14;
      --proj-opacity: 0.48;
      --proj-blur: 16px;
      --proj-bright: 1.55;
      --proj-sat: 2.55;
      --proj-contrast: 1.28;
      --panelInterferenceBase: .18;
      --panelInterferenceStep: .28;
    }
    html,body{ width:100%; min-height:100%; }
    body{ margin:0; background:#0a0808; overflow-x:hidden; position:relative; }

    #video-layer{ position:fixed; inset:0; z-index:0; overflow:hidden; pointer-events:none; }
    #video-layer video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; pointer-events:none; }
    #myVideo{ filter: blur(2px); transform: scale(1.03); }

    .sandGlass{ position:absolute; inset:0; z-index:50; pointer-events:none;
      background: rgba(255,255,255,var(--glass-milk));
      backdrop-filter: blur(var(--glass-blur)); -webkit-backdrop-filter: blur(var(--glass-blur));
    }
    .sandGlass::before{ content:""; position:absolute; inset:0; opacity: var(--grain-op); mix-blend-mode: overlay;
      background-image: radial-gradient(circle at 20% 30%, rgba(255,255,255,.25) 0 1px, transparent 2px);
    }

    #bloomVideo{ z-index:3; pointer-events:none; filter: blur(var(--proj-blur)) brightness(var(--proj-bright)) contrast(var(--proj-contrast)) saturate(var(--proj-sat));
      opacity: var(--proj-opacity); mix-blend-mode: color-dodge; transform: scale(1.06);
      animation: drift 60s ease-in-out infinite alternate; visibility:hidden; opacity:0;
    }
    @keyframes drift{ 0%{ transform: scale(1.05) translate3d(0.5%, -0.3%, 0); } 100%{ transform: scale(1.075) translate3d(-0.5%, 0.3%, 0); } }

    #vMilk, #vM, #vC, #vY, #bloomOverlay{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform: scale(1.03);
      pointer-events:none; visibility:hidden; opacity:0; }

    #vMilk{ z-index:6; filter:url(#milkyPaper); opacity:1; }
    #vM{ z-index:7; filter:url(#sprayMagenta); mix-blend-mode:screen; opacity:.95; transform:scale(1.04);
      filter:url(#sprayMagenta) drop-shadow(0 0 18px rgba(255,16,200,.40)) drop-shadow(0 0 42px rgba(255,16,200,.22)); }
    #vC{ z-index:7; filter:url(#sprayCyan); mix-blend-mode:screen; opacity:.55; transform:scale(1.04); }
    #vY{ z-index:7; filter:url(#sprayYellow); mix-blend-mode:screen; opacity:.45; transform:scale(1.04); }

    #bloomOverlay{ z-index:9; mix-blend-mode:screen; filter: blur(10px) brightness(1.55) contrast(1.18) saturate(2.2);
      opacity:.40; transform: scale(1.06); }

    html.is-safari #vM, html.is-safari #vC, html.is-safari #vY{ filter:none !important; -webkit-filter:none !important; }
    html.is-safari #vMilk{ filter:none !important; -webkit-filter:none !important; mix-blend-mode:screen !important; opacity:.85 !important; }
    html.is-safari #vM{ mix-blend-mode:screen !important; opacity:.90 !important; filter: saturate(4) contrast(1.55) brightness(1.12) hue-rotate(305deg) !important;
      -webkit-filter: saturate(4) contrast(1.55) brightness(1.12) hue-rotate(305deg) !important; }
    html.is-safari #vC{ mix-blend-mode:screen !important; opacity:.55 !important; filter: saturate(4) contrast(1.45) brightness(1.08) hue-rotate(175deg) !important;
      -webkit-filter: saturate(4) contrast(1.45) brightness(1.08) hue-rotate(175deg) !important; }
    html.is-safari #vY{ mix-blend-mode:screen !important; opacity:.40 !important; filter: saturate(3.2) contrast(1.35) brightness(1.06) hue-rotate(45deg) !important;
      -webkit-filter: saturate(3.2) contrast(1.35) brightness(1.06) hue-rotate(45deg) !important; }

    /* LED panel: scrolluje, není fixed */
    #ledWrapper{ position:absolute; top:14px; right:14px; z-index:10; transform: scale(0.45); transform-origin: top right; pointer-events:auto; }
  </style>

</head>
<body>

<!-- ===== WT BACKGROUND MODULE (DOM) ===== -->
<svg width="0" height="0" style="position:absolute;left:-9999px;top:-9999px" aria-hidden="true" focusable="false">
  <filter id="milkyPaper" color-interpolation-filters="sRGB">
    <feColorMatrix type="matrix" values="
      0.2126 0.7152 0.0722 0 0
      0.2126 0.7152 0.0722 0 0
      0.2126 0.7152 0.0722 0 0
      0      0      0      1 0" result="g"/>
    <feComponentTransfer in="g" result="w">
      <feFuncR type="linear" slope="1.02" intercept="0.30"/>
      <feFuncG type="linear" slope="1.02" intercept="0.30"/>
      <feFuncB type="linear" slope="1.02" intercept="0.32"/>
    </feComponentTransfer>
    <feComponentTransfer in="w" result="m">
      <feFuncR type="gamma" amplitude="1" exponent="0.82" offset="0"/>
      <feFuncG type="gamma" amplitude="1" exponent="0.82" offset="0"/>
      <feFuncB type="gamma" amplitude="1" exponent="0.82" offset="0"/>
    </feComponentTransfer>
    <feComponentTransfer in="m">
      <feFuncR type="table" tableValues="0.20 0.34 0.50 0.66 0.80 0.92 1"/>
      <feFuncG type="table" tableValues="0.20 0.34 0.50 0.66 0.80 0.92 1"/>
      <feFuncB type="table" tableValues="0.22 0.35 0.50 0.66 0.81 0.93 1"/>
    </feComponentTransfer>
  </filter>

  <!-- MAGENTA: alpha = 1.25*R + 1.25*B - 1.55*G - 0.25 -->
  <filter id="sprayMagenta" color-interpolation-filters="sRGB">
    <feColorMatrix type="matrix" values="
      1 0 0 0 0
      0 1 0 0 0
      0 0 1 0 0
      1.25 -1.55 1.25 0 -0.25" result="a"/>
    <feComponentTransfer in="a" result="t">
      <feFuncA type="gamma" amplitude="1" exponent="2.20" offset="0"/>
    </feComponentTransfer>
    <feComponentTransfer in="t" result="h">
      <feFuncA type="linear" slope="4.4" intercept="-1.18"/>
    </feComponentTransfer>
    <feGaussianBlur in="h" stdDeviation="1.9" result="b"/>
    <feColorMatrix in="b" type="matrix" values="
      0 0 0 0 1.00
      0 0 0 0 0.06
      0 0 0 0 0.82
      0 0 0 1 0" result="c"/>
    <feComponentTransfer in="c">
      <feFuncA type="linear" slope="1.30" intercept="0"/>
    </feComponentTransfer>
  </filter>

  <!-- CYAN: alpha = 1.20*G + 1.20*B - 1.35*R - 0.20 -->
  <filter id="sprayCyan" color-interpolation-filters="sRGB">
    <feColorMatrix type="matrix" values="
      1 0 0 0 0
      0 1 0 0 0
      0 0 1 0 0
      -1.35 1.20 1.20 0 -0.20" result="a"/>
    <feComponentTransfer in="a" result="t">
      <feFuncA type="gamma" amplitude="1" exponent="2.10" offset="0"/>
    </feComponentTransfer>
    <feComponentTransfer in="t" result="h">
      <feFuncA type="linear" slope="4.0" intercept="-1.10"/>
    </feComponentTransfer>
    <feGaussianBlur in="h" stdDeviation="1.8" result="b"/>
    <feColorMatrix in="b" type="matrix" values="
      0 0 0 0 0.05
      0 0 0 0 0.92
      0 0 0 0 1.00
      0 0 0 1 0" result="c"/>
    <feComponentTransfer in="c">
      <feFuncA type="linear" slope="1.15" intercept="0"/>
    </feComponentTransfer>
  </filter>

  <!-- YELLOW: alpha = 1.25*R + 1.10*G - 1.35*B - 0.18 -->
  <filter id="sprayYellow" color-interpolation-filters="sRGB">
    <feColorMatrix type="matrix" values="
      1 0 0 0 0
      0 1 0 0 0
      0 0 1 0 0
      1.25 1.10 -1.35 0 -0.18" result="a"/>
    <feComponentTransfer in="a" result="t">
      <feFuncA type="gamma" amplitude="1" exponent="2.05" offset="0"/>
    </feComponentTransfer>
    <feComponentTransfer in="t" result="h">
      <feFuncA type="linear" slope="3.6" intercept="-1.00"/>
    </feComponentTransfer>
    <feGaussianBlur in="h" stdDeviation="1.7" result="b"/>
    <feColorMatrix in="b" type="matrix" values="
      0 0 0 0 1.00
      0 0 0 0 0.95
      0 0 0 0 0.10
      0 0 0 1 0" result="c"/>
    <feComponentTransfer in="c">
      <feFuncA type="linear" slope="1.10" intercept="0"/>
    </feComponentTransfer>
  </filter>
</svg>

<div id="ledWrapper"></div>

<div id="video-layer" aria-hidden="true">
  <video id="myVideo" autoplay muted loop playsinline preload="auto">
    <source src="assets/video/wave.mp4" type="video/mp4">
  </video>
  <video id="vMilk" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
  <video id="vM" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
  <video id="vC" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
  <video id="vY" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
  <video id="bloomOverlay" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
  <div class="sandGlass" id="glass1"></div>
  <video id="bloomVideo" autoplay muted loop playsinline preload="auto" aria-hidden="true"><source src="assets/video/wave.mp4" type="video/mp4"></video>
</div>
<!-- ===== /WT BACKGROUND MODULE ===== -->

<!-- ===== SHARE MODULE (původní) ===== -->
<div id="shareOrb" class="glassBase circle v-white" aria-label="Share">
  <div class="pressGlow"></div>
  <button class="coreBtn" aria-label="Share">
    <svg class="shareIcon" viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="18" cy="5" r="3"></circle>
      <circle cx="6" cy="12" r="3"></circle>
      <circle cx="18" cy="19" r="3"></circle>
      <path d="M8.7 10.7l6.6-3.4M8.7 13.3l6.6 3.4"></path>
    </svg>
  </button>
</div>

  <div class="main"></div>

  <!-- přesný konec stránky -->
  <div id="wtBottomSentinel" aria-hidden="true"></div>

  <div id="wtSheetBackdrop"></div>

  <div id="wtActionSheet" role="dialog" aria-modal="true" aria-label="Share">
    <div class="glassPlate" aria-label="glass plate">
      <div class="pressGlow"></div>

      <div class="coreSquare shareCore" role="menu" aria-label="share options">
        <button class="shareRow" type="button" data-action="share">Share</button>
        <button class="shareRow" type="button" data-action="instagram">Instagram</button>
        <button class="shareRow" type="button" data-action="mail">Mail</button>
      </div>
    </div>
  </div>


<!-- ===== QR MODULE (původní, jen wrapper + 2 třídy přejmenované) ===== -->
<div id="qrWrap">
<div id="wtOrb" aria-label="Sticker" role="button" tabindex="0">
  <img decoding="async" src="assets/gif/wave.gif" alt="sticker">
</div>

<div id="wtOverlay" aria-hidden="true">
  <div class="backdrop" aria-hidden="true"></div>

  <div id="wtCard" role="dialog" aria-label="QR label">
    <div id="wtInner">
      <div class="wtFace wtFront">
        <img class="frontImg" decoding="async" src="assets/gif/wave.gif" alt="sticker">
      </div>

      <div class="wtFace wtBack">
        <div class="glassSquare">
          <div class="qr_pressGlow"></div>
          <button class="qr_coreSquare" aria-label="wave.today QR label">
            <div class="qrWrap" aria-hidden="true">
              <svg class="qrSvg" version="1.1" viewBox="0 0 33 33" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
<path d="M 12 4 L 12 5 L 13 5 L 13 4 z M 23 4 L 23 5 L 24 5 L 24 4 z M 4 9 L 4 10 L 5 10 L 5 9 z M 15 9 L 15 10 L 16 10 L 16 9 z M 12 22 L 12 23 L 13 23 L 13 22 z M 15 18 L 15 19 L 16 19 L 16 18 z M 4 27 L 4 28 L 5 28 L 5 27 z M 15 27 L 15 28 L 16 28 L 16 27 z M 8 6 L 8 7 L 9 7 L 9 6 z M 26 14 L 26 15 L 27 15 L 27 14 z M 7 10 L 7 11 L 8 11 L 8 10 z M 26 23 L 26 24 L 27 24 L 27 23 z M 7 19 L 7 20 L 8 20 L 8 19 z M 7 28 L 7 29 L 8 29 L 8 28 z M 19 11 L 19 12 L 20 12 L 20 11 z M 22 7 L 22 8 L 23 8 L 23 7 z M 11 16 L 11 17 L 12 17 L 12 16 z M 22 16 L 22 17 L 23 17 L 23 16 z M 22 25 L 22 26 L 23 26 L 23 25 z M 12 8 L 12 9 L 13 9 L 13 8 z M 4 4 L 4 5 L 5 5 L 5 4 z M 15 4 L 15 5 L 16 5 L 16 4 z M 14 26 L 14 27 L 15 27 L 15 26 z M 18 5 L 18 6 L 19 6 L 19 5 z M 26 18 L 26 19 L 27 19 L 27 18 z M 26 27 L 26 28 L 27 28 L 27 27 z M 18 23 L 18 24 L 19 24 L 19 23 z M 19 6 L 19 7 L 20 7 L 20 6 z M 11 20 L 11 21 L 12 21 L 12 20 z M 22 20 L 22 21 L 23 21 L 23 20 z M 15 8 L 15 9 L 16 9 L 16 8 z M 6 17 L 6 18 L 7 18 L 7 17 z M 6 26 L 6 27 L 7 27 L 7 26 z M 26 4 L 26 5 L 27 5 L 27 4 z M 18 18 L 18 19 L 19 19 L 19 18 z M 22 6 L 22 7 L 23 7 L 23 6 z M 11 15 L 11 16 L 12 16 L 12 15 z M 10 28 L 10 29 L 11 29 L 11 28 z M 25 26 L 25 27 L 26 27 L 26 26 z M 14 7 L 14 8 L 15 8 L 15 7 z M 14 16 L 14 17 L 15 17 L 15 16 z M 14 25 L 14 26 L 15 26 L 15 25 z M 26 8 L 26 9 L 27 9 L 27 8 z M 7 4 L 7 5 L 8 5 L 8 4 z M 18 13 L 18 14 L 19 14 L 19 13 z M 7 22 L 7 23 L 8 23 L 8 22 z M 21 24 L 21 25 L 22 25 L 22 24 z M 10 14 L 10 15 L 11 15 L 11 14 z M 25 12 L 25 13 L 26 13 L 26 12 z M 10 23 L 10 24 L 11 24 L 11 23 z M 14 11 L 14 12 L 15 12 L 15 11 z M 6 7 L 6 8 L 7 8 L 7 7 z M 6 16 L 6 17 L 7 17 L 7 16 z M 6 25 L 6 26 L 7 26 L 7 25 z M 7 8 L 7 9 L 8 9 L 8 8 z M 18 8 L 18 9 L 19 9 L 19 8 z M 21 19 L 21 20 L 22 20 L 22 19 z M 13 15 L 13 16 L 14 16 L 14 15 z M 21 28 L 21 29 L 22 29 L 22 28 z M 13 24 L 13 25 L 14 25 L 14 24 z M 10 9 L 10 10 L 11 10 L 11 9 z M 25 7 L 25 8 L 26 8 L 26 7 z M 10 18 L 10 19 L 11 19 L 11 18 z M 25 16 L 25 17 L 26 17 L 26 16 z M 10 27 L 10 28 L 11 28 L 11 27 z M 14 6 L 14 7 L 15 7 L 15 6 z M 17 26 L 17 27 L 18 27 L 18 26 z M 20 22 L 20 23 L 21 23 L 21 22 z M 21 14 L 21 15 L 22 15 L 22 14 z M 10 4 L 10 5 L 11 5 L 11 4 z M 10 22 L 10 23 L 11 23 L 11 22 z M 25 20 L 25 21 L 26 21 L 26 20 z M 24 24 L 24 25 L 25 25 L 25 24 z M 14 10 L 14 11 L 15 11 L 15 10 z M 6 6 L 6 7 L 7 7 L 7 6 z M 17 12 L 17 13 L 18 13 L 18 12 z M 28 12 L 28 13 L 29 13 L 29 12 z M 17 21 L 17 22 L 18 22 L 18 21 z M 20 17 L 20 18 L 21 18 L 21 17 z M 5 28 L 5 29 L 6 29 L 6 28 z M 13 5 L 13 6 L 14 6 L 14 5 z M 9 16 L 9 17 L 10 17 L 10 16 z M 10 8 L 10 9 L 11 9 L 11 8 z M 25 6 L 25 7 L 26 7 L 26 6 z M 24 19 L 24 20 L 25 20 L 25 19 z M 28 7 L 28 8 L 29 8 L 29 7 z M 17 16 L 17 17 L 18 17 L 18 16 z M 28 16 L 28 17 L 29 17 L 29 16 z M 28 25 L 28 26 L 29 26 L 29 25 z M 20 21 L 20 22 L 21 22 L 21 21 z M 9 20 L 9 21 L 10 21 L 10 20 z M 13 18 L 13 19 L 14 19 L 14 18 z M 24 14 L 24 15 L 25 15 L 25 14 z M 16 10 L 16 11 L 17 11 L 17 10 z M 27 10 L 27 11 L 28 11 L 28 10 z M 24 23 L 24 24 L 25 24 L 25 23 z M 27 19 L 27 20 L 28 20 L 28 19 z M 16 28 L 16 29 L 17 29 L 17 28 z M 27 28 L 27 29 L 28 29 L 28 28 z M 8 24 L 8 25 L 9 25 L 9 24 z M 17 11 L 17 12 L 18 12 L 18 11 z M 20 7 L 20 8 L 21 8 L 21 7 z M 17 20 L 17 21 L 18 21 L 18 20 z M 20 25 L 20 26 L 21 26 L 21 25 z M 13 13 L 13 14 L 14 14 L 14 13 z M 12 17 L 12 18 L 13 18 L 13 17 z M 4 22 L 4 23 L 5 23 L 5 22 z M 24 18 L 24 19 L 25 19 L 25 18 z M 24 27 L 24 28 L 25 28 L 25 27 z M 8 10 L 8 11 L 9 11 L 9 10 z M 16 23 L 16 24 L 17 24 L 17 23 z M 27 23 L 27 24 L 28 24 L 28 23 z M 8 28 L 8 29 L 9 29 L 9 28 z M 5 4 L 5 5 L 6 5 L 6 4 z M 28 6 L 28 7 L 29 7 L 29 6 z M 5 13 L 5 14 L 6 14 L 6 13 z M 5 22 L 5 23 L 6 23 L 6 22 z M 20 20 L 20 21 L 21 21 L 21 20 z M 9 10 L 9 11 L 10 11 L 10 10 z M 12 12 L 12 13 L 13 13 L 13 12 z M 23 12 L 23 13 L 24 13 L 24 12 z M 4 8 L 4 9 L 5 9 L 5 8 z M 12 21 L 12 22 L 13 22 L 13 21 z M 4 17 L 4 18 L 5 18 L 5 17 z M 4 26 L 4 27 L 5 27 L 5 26 z M 15 26 L 15 27 L 16 27 L 16 26 z M 24 4 L 24 5 L 25 5 L 25 4 z M 24 13 L 24 14 L 25 14 L 25 13 z M 24 22 L 24 23 L 25 23 L 25 22 z M 16 18 L 16 19 L 17 19 L 17 18 z M 8 14 L 8 15 L 9 15 L 9 14 z M 27 27 L 27 28 L 28 28 L 28 27 z M 28 10 L 28 11 L 29 11 L 29 10 z M 20 6 L 20 7 L 21 7 L 21 6 z M 19 19 L 19 20 L 20 20 L 20 19 z M 22 24 L 22 25 L 23 25 L 23 24 z M 12 7 L 12 8 L 13 8 L 13 7 z M 4 12 L 4 13 L 5 13 L 5 12 z M 23 25 L 23 26 L 24 26 L 24 25 z M 24 8 L 24 9 L 25 9 L 25 8 z M 27 4 L 27 5 L 28 5 L 28 4 z M 24 17 L 24 18 L 25 18 L 25 17 z M 27 13 L 27 14 L 28 14 L 28 13 z M 8 18 L 8 19 L 9 19 L 9 18 z M 19 14 L 19 15 L 20 15 L 20 14 z M 22 10 L 22 11 L 23 11 L 23 10 z M 22 19 L 22 20 L 23 20 L 23 19 z M 22 28 L 22 29 L 23 29 L 23 28 z M 12 11 L 12 12 L 13 12 L 13 11 z M 4 7 L 4 8 L 5 8 L 5 7 z M 23 20 L 23 21 L 24 21 L 24 20 z M 4 16 L 4 17 L 5 17 L 5 16 z M 4 25 L 4 26 L 5 26 L 5 25 z M 16 8 L 16 9 L 17 9 L 17 8 z M 8 4 L 8 5 L 9 5 L 9 4 z M 8 13 L 8 14 L 9 14 L 9 13 z M 7 17 L 7 18 L 8 18 L 8 17 z M 7 26 L 7 27 L 8 27 L 8 26 z M 18 26 L 18 27 L 19 27 L 19 26 z M 22 5 L 22 6 L 23 6 L 23 5 z M 19 18 L 19 19 L 20 19 L 20 18 z M 19 27 L 19 28 L 20 28 L 20 27 z M 12 15 L 12 16 L 13 16 L 13 15 z M 23 15 L 23 16 L 24 16 L 24 15 z M 15 11 L 15 12 L 16 12 L 16 11 z M 4 20 L 4 21 L 5 21 L 5 20 z M 14 24 L 14 25 L 15 25 L 15 24 z M 26 7 L 26 8 L 27 8 L 27 7 z M 26 16 L 26 17 L 27 17 L 27 16 z M 26 25 L 26 26 L 27 26 L 27 25 z M 18 21 L 18 22 L 19 22 L 19 21 z M 19 4 L 19 5 L 20 5 L 20 4 z M 19 13 L 19 14 L 20 14 L 20 13 z M 22 9 L 22 10 L 23 10 L 23 9 z M 11 18 L 11 19 L 12 19 L 12 18 z M 23 10 L 23 11 L 24 11 L 24 10 z M 4 6 L 4 7 L 5 7 L 5 6 z M 14 28 L 14 29 L 15 29 L 15 28 z M 6 24 L 6 25 L 7 25 L 7 24 z M 7 7 L 7 8 L 8 8 L 8 7 z M 26 20 L 26 21 L 27 21 L 27 20 z M 7 16 L 7 17 L 8 17 L 8 16 z M 18 16 L 18 17 L 19 17 L 19 16 z M 7 25 L 7 26 L 8 26 L 8 25 z M 19 8 L 19 9 L 20 9 L 20 8 z M 22 4 L 22 5 L 23 5 L 23 4 z M 19 17 L 19 18 L 20 18 L 20 17 z M 22 22 L 22 23 L 23 23 L 23 22 z M 10 26 L 10 27 L 11 27 L 11 26 z M 25 24 L 25 25 L 26 25 L 26 24 z M 14 5 L 14 6 L 15 6 L 15 5 z M 6 10 L 6 11 L 7 11 L 7 10 z M 14 23 L 14 24 L 15 24 L 15 23 z M 11 12 L 11 13 L 12 13 L 12 12 z M 6 19 L 6 20 L 7 20 L 7 19 z M 6 28 L 6 29 L 7 29 L 7 28 z M 26 6 L 26 7 L 27 7 L 27 6 z M 26 15 L 26 16 L 27 16 L 27 15 z M 26 24 L 26 25 L 27 25 L 27 24 z M 22 8 L 22 9 L 23 9 L 23 8 z M 10 12 L 10 13 L 11 13 L 11 12 z M 25 10 L 25 11 L 26 11 L 26 10 z M 14 18 L 14 19 L 15 19 L 15 18 z M 14 27 L 14 28 L 15 28 L 15 27 z M 26 10 L 26 11 L 27 11 L 27 10 z M 7 6 L 7 7 L 8 7 L 8 6 z M 18 6 L 18 7 L 19 7 L 19 6 z M 7 15 L 7 16 L 8 16 L 8 15 z M 18 15 L 18 16 L 19 16 L 19 15 z M 21 17 L 21 18 L 22 18 L 22 17 z M 21 26 L 21 27 L 22 27 L 22 26 z M 10 7 L 10 8 L 11 8 L 11 7 z M 10 16 L 10 17 L 11 17 L 11 16 z M 25 14 L 25 15 L 26 15 L 26 14 z M 10 25 L 10 26 L 11 26 L 11 25 z M 25 23 L 25 24 L 26 24 L 26 23 z M 14 22 L 14 23 L 15 23 L 15 22 z M 6 18 L 6 19 L 7 19 L 7 18 z M 17 24 L 17 25 L 18 25 L 18 24 z M 28 24 L 28 25 L 29 25 L 29 24 z M 18 10 L 18 11 L 19 11 L 19 10 z M 21 12 L 21 13 L 22 13 L 22 12 z M 13 8 L 13 9 L 14 9 L 14 8 z M 13 17 L 13 18 L 14 18 L 14 17 z M 9 28 L 9 29 L 10 29 L 10 28 z M 13 26 L 13 27 L 14 27 L 14 26 z M 10 20 L 10 21 L 11 21 L 11 20 z M 25 18 L 25 19 L 26 19 L 26 18 z M 25 27 L 25 28 L 26 28 L 26 27 z M 6 4 L 6 5 L 7 5 L 7 4 z M 6 13 L 6 14 L 7 14 L 7 13 z M 6 22 L 6 23 L 7 23 L 7 22 z M 17 19 L 17 20 L 18 20 L 18 19 z M 17 28 L 17 29 L 18 29 L 18 28 z M 28 28 L 28 29 L 29 29 L 29 28 z M 20 24 L 20 25 L 21 25 L 21 24 z M 9 14 L 9 15 L 10 15 L 10 14 z M 21 16 L 21 17 L 22 17 L 22 16 z M 21 25 L 21 26 L 22 26 L 22 25 z M 13 21 L 13 22 L 14 22 L 14 21 z M 10 6 L 10 7 L 11 7 L 11 6 z M 25 4 L 25 5 L 26 5 L 26 4 z M 25 13 L 25 14 L 26 14 L 26 13 z M 10 24 L 10 25 L 11 25 L 11 24 z M 6 8 L 6 9 L 7 9 L 7 8 z M 17 5 L 17 6 L 18 6 L 18 5 z M 28 5 L 28 6 L 29 6 L 29 5 z M 20 10 L 20 11 L 21 11 L 21 10 z M 28 23 L 28 24 L 29 24 L 29 23 z M 9 18 L 9 19 L 10 19 L 10 18 z M 21 20 L 21 21 L 22 21 L 22 20 z M 10 10 L 10 11 L 11 11 L 11 10 z M 25 8 L 25 9 L 26 9 L 26 8 z M 24 12 L 24 13 L 25 13 L 25 12 z M 24 21 L 24 22 L 25 22 L 25 21 z M 16 17 L 16 18 L 17 18 L 17 17 z M 27 17 L 27 18 L 28 18 L 28 17 z M 16 26 L 16 27 L 17 27 L 17 26 z M 27 26 L 27 27 L 28 27 L 28 26 z M 8 22 L 8 23 L 9 23 L 9 22 z M 28 9 L 28 10 L 29 10 L 29 9 z M 20 5 L 20 6 L 21 6 L 21 5 z M 17 18 L 17 19 L 18 19 L 18 18 z M 17 27 L 17 28 L 18 28 L 18 27 z M 20 23 L 20 24 L 21 24 L 21 23 z M 9 4 L 9 5 L 10 5 L 10 4 z M 9 13 L 9 14 L 10 14 L 10 13 z M 9 22 L 9 23 L 10 23 L 10 22 z M 10 5 L 10 6 L 11 6 L 11 5 z M 12 24 L 12 25 L 13 25 L 13 24 z M 23 24 L 23 25 L 24 25 L 24 24 z M 24 7 L 24 8 L 25 8 L 25 7 z M 8 8 L 8 9 L 9 9 L 9 8 z M 8 17 L 8 18 L 9 18 L 9 17 z M 8 26 L 8 27 L 9 27 L 9 26 z M 28 4 L 28 5 L 29 5 L 29 4 z M 17 13 L 17 14 L 18 14 L 18 13 z M 5 20 L 5 21 L 6 21 L 6 20 z M 20 18 L 20 19 L 21 19 L 21 18 z M 12 10 L 12 11 L 13 11 L 13 10 z M 23 19 L 23 20 L 24 20 L 24 19 z M 15 15 L 15 16 L 16 16 L 16 15 z M 12 28 L 12 29 L 13 29 L 13 28 z M 4 24 L 4 25 L 5 25 L 5 24 z M 15 24 L 15 25 L 16 25 L 16 24 z M 16 7 L 16 8 L 17 8 L 17 7 z M 24 20 L 24 21 L 25 21 L 25 20 z M 27 16 L 27 17 L 28 17 L 28 16 z M 8 12 L 8 13 L 9 13 L 9 12 z M 16 25 L 16 26 L 17 26 L 17 25 z M 27 25 L 27 26 L 28 26 L 28 25 z M 28 8 L 28 9 L 29 9 L 29 8 z M 20 4 L 20 5 L 21 5 L 21 4 z M 20 13 L 20 14 L 21 14 L 21 13 z M 23 14 L 23 15 L 24 15 L 24 14 z M 4 10 L 4 11 L 5 11 L 5 10 z M 15 19 L 15 20 L 16 20 L 16 19 z M 4 28 L 4 29 L 5 29 L 5 28 z M 24 6 L 24 7 L 25 7 L 25 6 z M 8 7 L 8 8 L 9 8 L 9 7 z M 16 20 L 16 21 L 17 21 L 17 20 z M 8 25 L 8 26 L 9 26 L 9 25 z M 5 10 L 5 11 L 6 11 L 6 10 z M 20 8 L 20 9 L 21 9 L 21 8 z M 19 21 L 19 22 L 20 22 L 20 21 z M 22 26 L 22 27 L 23 27 L 23 26 z M 12 9 L 12 10 L 13 10 L 13 9 z M 4 5 L 4 6 L 5 6 L 5 5 z M 12 18 L 12 19 L 13 19 L 13 18 z M 23 18 L 23 19 L 24 19 L 24 18 z M 4 14 L 4 15 L 5 15 L 5 14 z M 15 14 L 15 15 L 16 15 L 16 14 z M 23 27 L 23 28 L 24 28 L 24 27 z M 4 23 L 4 24 L 5 24 L 5 23 z M 24 10 L 24 11 L 25 11 L 25 10 z M 16 6 L 16 7 L 17 7 L 17 6 z M 27 15 L 27 16 L 28 16 L 28 15 z M 26 19 L 26 20 L 27 20 L 27 19 z M 26 28 L 26 29 L 27 29 L 27 28 z M 7 24 L 7 25 L 8 25 L 8 24 z M 18 24 L 18 25 L 19 25 L 19 24 z M 19 7 L 19 8 L 20 8 L 20 7 z M 19 16 L 19 17 L 20 17 L 20 16 z M 22 12 L 22 13 L 23 13 L 23 12 z" id="qr-path" fill="#000000" fill-opacity="1" fill-rule="nonzero" stroke="none"/>
</svg>
            </div>
          </button>
        </div>
      </div>

    </div>
  </div>
</div>
</div>

  
  <script>
    (function(){
      const ua = navigator.userAgent;
      const isSafari = /Safari/.test(ua) && !/Chrome|Chromium|Edg|OPR|CriOS|FxiOS/.test(ua);
      if(isSafari) document.documentElement.classList.add('is-safari');
    })();
  </script>

  <script>
    const base = document.getElementById("myVideo");
    const ambient = document.getElementById("bloomVideo");
    const bloomOv = document.getElementById("bloomOverlay");
    const vMilk = document.getElementById("vMilk");
    const vM = document.getElementById("vM");
    const vC = document.getElementById("vC");
    const vY = document.getElementById("vY");

    const vids = [base, ambient, bloomOv, vMilk, vM, vC, vY].filter(Boolean);

    window.addEventListener('load', ()=>{
      vids.forEach(v=>{
        try{ v.muted = true; v.playsInline = true; v.play().catch(()=>{}); }catch(e){}
      });
    });

    function softSync(){
      const t = base?.currentTime || 0;
      vids.forEach(v=>{
        if(v === base) return;
        if(v.readyState >= 2 && base.readyState >= 2){
          const d = t - v.currentTime;
          if(Math.abs(d) > 0.35) v.currentTime = t;
        }
      });
    }
    setInterval(softSync, 250);
    window.softSync = softSync;
  </script>

  <script>
    /* LED panel (shadow DOM) */
    (function(){
      const host = document.getElementById('ledWrapper');
      if(!host) return;

      window.leds = [{dataset:{on:"0"}}, {dataset:{on:"0"}}, {dataset:{on:"0"}}];
      const leds = window.leds;

      const shadow = host.attachShadow ? host.attachShadow({mode:'open'}) : null;

      const style = document.createElement('style');
      style.textContent = "\\n  :host{\\n    --bg:#2f2f2f;\\n\\n    /* Proporce panelu */\\n    --panelH: 132px;\\n    --panelPadY: 18px;\\n    --panelPadX: 44px;\\n    --gap: 20px;\\n\\n    /* sklo panelu */\\n    --glassClearA: rgba(255,255,255,.14);\\n    --glassClearB: rgba(255,255,255,.08);\\n    --glassMilkA:  rgba(255,255,255,.10);\\n    --glassMilkB:  rgba(255,255,255,.12);\\n\\n    --glassRingThickness: 13px;\\n    --glassRimBlur: 1.05px;\\n\\n    --topRim1: rgba(0,0,0,.24);\\n    --topRim2: rgba(0,0,0,.09);\\n    --topRimFade: 30%;\\n\\n    --botRim1: rgba(255,255,255,.74);\\n    --botRim2: rgba(255,255,255,.30);\\n\\n    --bleedA: .16;\\n    --bleedB: .08;\\n\\n    /* LED */\\n    --led: 86px;\\n    --ledRing: 12px;\\n\\n    /* svit */\\n    --haloBoost: 1.65;\\n    --coreBoost: 1.25;\\n\\n    /* vnit\u0159n\u00ed \u201clom\u201d v panelu */\\n    --panelInterferenceBase: .18;\\n    --panelInterferenceStep: .28;\\n  }\\n\\n  *{box-sizing:border-box}\\n  html,body{height:100%;margin:0}\\n  body{\\n    display:grid;\\n    place-items:center;\\n    background:\\n      radial-gradient(1100px 650px at 50% 25%, rgba(255,255,255,.06), transparent 60%),\\n      radial-gradient(900px 500px at 20% 80%, rgba(0,255,255,.05), transparent 55%),\\n      radial-gradient(900px 500px at 80% 80%, rgba(255,0,200,.05), transparent 55%),\\n      radial-gradient(900px 500px at 50% 90%, rgba(255,255,0,.05), transparent 55%),\\n      var(--bg);\\n    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\\n  }\\n\\n  /* PANEL */\\n  .panel{\\n    height: var(--panelH);\\n    width: fit-content;\\n    padding: var(--panelPadY) var(--panelPadX);\\n    border-radius: calc(var(--panelH) / 2);\\n    position:relative;\\n    display:flex;\\n    align-items:center;\\n    justify-content:center;\\n    isolation:isolate;\\n\\n    background:\\n      radial-gradient(120% 120% at 50% 60%, var(--glassMilkA), transparent 62%),\\n      radial-gradient(120% 120% at 50% 92%, var(--glassMilkB), transparent 58%),\\n      radial-gradient(120% 120% at 35% 25%, var(--glassClearA), transparent 55%),\\n      radial-gradient(140% 140% at 65% 70%, var(--glassClearB), transparent 60%),\\n      rgba(255,255,255,.08);\\n\\n    box-shadow:\\n      inset 0 18px 26px rgba(0,0,0,.22),\\n      inset 0 -22px 30px rgba(255,255,255,.22),\\n      0 22px 54px rgba(0,0,0,.28);\\n\\n    backdrop-filter: blur(8px);\\n    -webkit-backdrop-filter: blur(8px);\\n  }\\n\\n  .panel::before{\\n    content:\"\";\\n    position:absolute;\\n    inset: 12px;\\n    border-radius: inherit;\\n    pointer-events:none;\\n    z-index: 1;\\n    background:\\n      radial-gradient(75% 60% at 18% 22%,\\n        rgba(255,255,255,.40) 0%,\\n        rgba(255,255,255,.16) 35%,\\n        transparent 72%),\\n      radial-gradient(55% 45% at 28% 32%,\\n        rgba(255,255,255,.16) 0%,\\n        transparent 72%);\\n    filter: blur(1.35px);\\n    opacity:.95;\\n  }\\n\\n  .panel::after{\\n    content:\"\";\\n    position:absolute;\\n    inset:-1px;\\n    border-radius: inherit;\\n    pointer-events:none;\\n    z-index: 6;\\n\\n    background:\\n      /* === FIX: jemn\u00e9 zv\u00fdrazn\u011bn\u00ed hrany vpravo naho\u0159e (aby se neztr\u00e1cela) === */\\n      radial-gradient(70% 70% at 92% 18%,\\n        rgba(255,255,255,.18) 0%,\\n        rgba(255,255,255,.08) 34%,\\n        transparent 62%),\\n      radial-gradient(85% 75% at 88% 20%,\\n        rgba(0,0,0,.14) 0%,\\n        transparent 58%),\\n\\n      /* p\u016fvodn\u00ed rim */\\n      radial-gradient(140% 120% at 50% 120%,\\n        var(--botRim1) 0%,\\n        var(--botRim2) 22%,\\n        transparent 52%),\\n      radial-gradient(170% 120% at 50% -38%,\\n        var(--topRim1) 0%,\\n        var(--topRim2) 14%,\\n        transparent var(--topRimFade));\\n\\n    -webkit-mask:\\n      linear-gradient(#000 0 0) content-box,\\n      linear-gradient(#000 0 0);\\n    -webkit-mask-composite: xor;\\n    mask-composite: exclude;\\n\\n    padding: var(--glassRingThickness);\\n    filter: blur(var(--glassRimBlur));\\n    opacity:.95;\\n  }\\n\\n  .panelLight{\\n    position:absolute;\\n    inset: 14px;\\n    border-radius: inherit;\\n    pointer-events:none;\\n    z-index: 2;\\n    mix-blend-mode: screen;\\n    filter: blur(16px);\\n    opacity: var(--panelInterferenceBase);\\n    transition: opacity .18s ease;\\n\\n    background:\\n      radial-gradient(150px 110px at 22% 56%, rgba(var(--L1), .46), transparent 70%),\\n      radial-gradient(150px 110px at 50% 56%, rgba(var(--L2), .46), transparent 70%),\\n      radial-gradient(150px 110px at 78% 56%, rgba(var(--L3), .46), transparent 70%),\\n      linear-gradient(90deg,\\n        rgba(var(--L1), .08),\\n        rgba(var(--L2), .10),\\n        rgba(var(--L3), .08));\\n  }\\n\\n  .ledRow{\\n    display:flex;\\n    gap: var(--gap);\\n    z-index: 7;\\n    position:relative;\\n  }\\n\\n  /* LED */\\n  .led{\\n    --rimTint: 0, 255, 255;\\n    --c1:#e9ffff; --c2:#72f6ff; --c3:#00a7b8;\\n    --on:0;\\n\\n    width: var(--led);\\n    height: var(--led);\\n    border-radius:50%;\\n    position:relative;\\n    cursor:pointer;\\n    user-select:none;\\n    -webkit-tap-highlight-color: transparent;\\n    isolation:isolate;\\n  }\\n\\n  .led .halo{\\n    position:absolute;\\n    inset:-72px;\\n    border-radius:50%;\\n    pointer-events:none;\\n    z-index: 0;\\n\\n    background:\\n      radial-gradient(62% 62% at 50% 58%,\\n        rgba(var(--rimTint), calc((.10 + .94*var(--on)) * var(--haloBoost))) 0%,\\n        rgba(255,255,255, calc(.08 * var(--on))) 18%,\\n        rgba(var(--rimTint), 0) 78%);\\n\\n    filter: blur(calc(18px + 26px*var(--on)));\\n    opacity: calc(.07 + .93*var(--on));\\n    mix-blend-mode: screen;\\n    transition: opacity .18s ease, filter .18s ease;\\n  }\\n\\n  /* ZAPU\u0160T\u011aN\u00cd (DR\u016eLEK) */\\n  .led .seat{\\n    position:absolute;\\n    inset:-3px;\\n    border-radius:50%;\\n    z-index: 1;\\n\\n    background:\\n      radial-gradient(closest-side at 50% 50%,\\n        rgba(255,255,255,.30) 0%,\\n        rgba(255,255,255,.12) 52%,\\n        rgba(255,255,255,0) 60%),\\n\\n      radial-gradient(110% 92% at 44% 62%,\\n        rgba(var(--rimTint), calc(.012 + .16*var(--on))) 0%,\\n        rgba(var(--rimTint), calc(.006 + .10*var(--on))) 32%,\\n        transparent 58%),\\n      radial-gradient(98% 86% at 58% 70%,\\n        rgba(var(--rimTint), calc(.010 + .14*var(--on))) 0%,\\n        rgba(var(--rimTint), calc(.005 + .09*var(--on))) 28%,\\n        transparent 54%),\\n      radial-gradient(120% 96% at 52% 64%,\\n        rgba(255,255,255, calc(.010 + .08*var(--on))) 0%,\\n        rgba(255,255,255,0) 55%),\\n\\n      radial-gradient(115% 115% at 50% 60%,\\n        rgba(255,255,255,.10) 0%,\\n        rgba(255,255,255,.05) 30%,\\n        rgba(0,0,0,.14) 46%,\\n        rgba(0,0,0,.32) 62%,\\n        rgba(0,0,0,0) 82%),\\n\\n      radial-gradient(88% 88% at 50% 92%,\\n        rgba(0,0,0,.20),\\n        rgba(0,0,0,0) 70%);\\n\\n    filter: blur(calc(0.55px + 0.15px*var(--on)));\\n\\n    box-shadow:\\n      inset 0 8px 10px rgba(255,255,255,.18),\\n      inset 0 -22px 28px rgba(0,0,0,.34),\\n      0 6px 10px rgba(0,0,0,.22);\\n\\n    opacity:.96;\\n  }\\n\\n  /* rim */\\n  .led .rim{\\n    position:absolute;\\n    inset:0;\\n    border-radius:50%;\\n    z-index: 2;\\n    pointer-events:none;\\n\\n    background:\\n      radial-gradient(72% 60% at 76% 84%,\\n        rgba(var(--rimTint), calc(var(--bleedA) * (0.45 + 0.95*var(--on)))) 0%,\\n        rgba(var(--rimTint), calc(var(--bleedB) * (0.45 + 0.95*var(--on)))) 28%,\\n        transparent 68%),\\n\\n      radial-gradient(140% 120% at 50% 120%,\\n        rgba(255,255,255,.70) 0%,\\n        rgba(255,255,255,.24) 22%,\\n        transparent 52%),\\n\\n      radial-gradient(170% 120% at 50% -38%,\\n        rgba(0,0,0,.24) 0%,\\n        rgba(0,0,0,.09) 14%,\\n        transparent 30%),\\n\\n      radial-gradient(110% 110% at 50% 60%,\\n        rgba(var(--rimTint), .42) 0%,\\n        rgba(var(--rimTint), .20) 44%,\\n        rgba(var(--rimTint), .09) 64%,\\n        transparent 74%);\\n\\n    -webkit-mask:\\n      linear-gradient(#000 0 0) content-box,\\n      linear-gradient(#000 0 0);\\n    -webkit-mask-composite: xor;\\n    mask-composite: exclude;\\n    padding: var(--ledRing);\\n\\n    filter: blur(1px);\\n    opacity:.98;\\n  }\\n\\n  /* plast */\\n  .led .lens{\\n    position:absolute;\\n    left: var(--ledRing);\\n    top:  var(--ledRing);\\n    width: calc(var(--led) - var(--ledRing)*2);\\n    height: calc(var(--led) - var(--ledRing)*2);\\n    border-radius:50%;\\n    z-index: 3;\\n    overflow:hidden;\\n\\n    background:\\n      radial-gradient(18px 18px at 28% 22%,\\n        rgba(255,255,255,.72), rgba(255,255,255,0) 65%),\\n\\n      linear-gradient(180deg,\\n        rgba(255,255,255,.62) 0%,\\n        rgba(255,255,255,.14) 26%,\\n        rgba(255,255,255,.06) 48%,\\n        rgba(0,0,0,.10) 100%),\\n\\n      linear-gradient(180deg, var(--c1), var(--c2) 55%, var(--c3));\\n\\n    border: 0;\\n    outline: 1px solid rgba(255,255,255,.14);\\n    outline-offset: -1px;\\n\\n    -webkit-mask: radial-gradient(circle at 50% 50%, #000 0 92%, transparent 100%);\\n    mask: radial-gradient(circle at 50% 50%, #000 0 92%, transparent 100%);\\n\\n    box-shadow:\\n      inset 0 -18px 22px rgba(0,0,0,.34),\\n      inset 0  10px 14px rgba(255,255,255,.14),\\n      0 10px 16px rgba(0,0,0,.18);\\n\\n    transition: filter .18s ease, transform .18s ease;\\n  }\\n\\n  /* T\u011aSN\u00c1 SP\u00c1RA mezi \u010do\u010dkou a sedlem */\\n  .led .lens::after{\\n    content:\"\";\\n    position:absolute;\\n    inset:0;\\n    border-radius:50%;\\n    pointer-events:none;\\n    background:\\n      radial-gradient(circle at 50% 50%,\\n        transparent 0 88%,\\n        rgba(0,0,0,.34) 89%,\\n        rgba(0,0,0,.18) 91%,\\n        rgba(255,255,255,.10) 93%,\\n        transparent 96%);\\n    mix-blend-mode: multiply;\\n    opacity:.80;\\n    filter: blur(.2px);\\n  }\\n\\n  /* odlesky */\\n  .led .shine1,.led .shine2{\\n    position:absolute;\\n    left: 12%;\\n    right:12%;\\n    border-radius:999px;\\n    transform: rotate(-6deg);\\n    pointer-events:none;\\n  }\\n  .led .shine1{\\n    top: 10%;\\n    height: 46%;\\n    background: radial-gradient(76% 90% at 50% 0%,\\n      rgba(255,255,255,.92),\\n      rgba(255,255,255,0) 74%);\\n    opacity:.62;\\n    filter: blur(1.2px);\\n  }\\n  .led .shine2{\\n    top: 27%;\\n    left: 18%;\\n    right:18%;\\n    height: 28%;\\n    background: radial-gradient(82% 110% at 50% 0%,\\n      rgba(255,255,255,.86),\\n      rgba(255,255,255,0) 76%);\\n    opacity:.56;\\n    filter: blur(1.2px);\\n  }\\n\\n  /* vnit\u0159n\u00ed svit */\\n  .led .innerGlow{\\n    position:absolute;\\n    inset:-14px;\\n    border-radius:50%;\\n    pointer-events:none;\\n    z-index: 4;\\n\\n    background:\\n      radial-gradient(42% 38% at 52% 60%,\\n        rgba(255,255,255, calc((.12 + .86*var(--on)) * var(--coreBoost))) 0%,\\n        rgba(255,255,255,0) 62%),\\n      radial-gradient(58% 56% at 50% 66%,\\n        rgba(var(--rimTint), calc(.12 + .98*var(--on))) 0%,\\n        rgba(var(--rimTint), 0) 70%);\\n\\n    opacity: calc(.10 + .90*var(--on));\\n    filter: blur(calc(2px + 8px*var(--on)));\\n    mix-blend-mode: screen;\\n    transition: opacity .18s ease, filter .18s ease;\\n  }\\n\\n  .led[data-on=\"1\"]{ --on:1; }\\n  .led[data-on=\"1\"] .lens{\\n    filter: saturate(1.28) brightness(1.14);\\n    transform: translateY(-1px);\\n  }\\n  .led[data-on=\"0\"]{ --on:0; }\\n\\n  /* Barvy \u2013 po\u0159ad\u00ed: Yellow, Magenta, Cyan */\\n  .y{ --rimTint: 255, 235,  70; --c1:#fffbe6; --c2:#fff06a; --c3:#c7a800; }\\n  .m{ --rimTint: 255,  60, 220; --c1:#ffe9fd; --c2:#ff62e9; --c3:#b0008f; }\\n  .c{ --rimTint:  40, 210, 255; --c1:#ecfdff; --c2:#7eefff; --c3:#00a8c7; }\\n";

      const wrap = document.createElement('div');
      wrap.innerHTML = "<div class=\"panel\" id=\"panel\">\\n<div class=\"panelLight\" id=\"panelLight\"></div>\\n<div class=\"ledRow\">\\n<div aria-label=\"Yellow\" class=\"led y\" data-on=\"0\">\\n<div class=\"halo\"></div><div class=\"seat\"></div><div class=\"rim\"></div>\\n<div class=\"lens\"><div class=\"innerGlow\"></div><div class=\"shine1\"></div><div class=\"shine2\"></div></div>\\n</div>\\n<div aria-label=\"Magenta\" class=\"led m\" data-on=\"0\">\\n<div class=\"halo\"></div><div class=\"seat\"></div><div class=\"rim\"></div>\\n<div class=\"lens\"><div class=\"innerGlow\"></div><div class=\"shine1\"></div><div class=\"shine2\"></div></div>\\n</div>\\n<div aria-label=\"Cyan\" class=\"led c\" data-on=\"0\">\\n<div class=\"halo\"></div><div class=\"seat\"></div><div class=\"rim\"></div>\\n<div class=\"lens\"><div class=\"innerGlow\"></div><div class=\"shine1\"></div><div class=\"shine2\"></div></div>\\n</div>\\n</div>\\n</div>";

      if(shadow){ shadow.appendChild(style); shadow.appendChild(wrap); }
      else { host.appendChild(style); host.appendChild(wrap); }

      const ledEls = [...(shadow ? shadow.querySelectorAll('.led') : host.querySelectorAll('.led'))];
      const panel = shadow ? shadow.querySelector('#panel') : host.querySelector('#panel');
      const panelLight = shadow ? shadow.querySelector('#panelLight') : host.querySelector('#panelLight');

      function tint(el){ const v = getComputedStyle(el).getPropertyValue('--rimTint').trim(); return v || "255,255,255"; }
      function rootVar(name){ const v = getComputedStyle(host).getPropertyValue(name).trim(); const n = parseFloat(v); return Number.isFinite(n) ? n : 0; }

      function updatePanelLight(){
        const t = ledEls.map(tint);
        if(panel){ panel.style.setProperty('--L1', t[0]); panel.style.setProperty('--L2', t[1]); panel.style.setProperty('--L3', t[2]); }
        const k = ledEls.reduce((n,l)=> n + (l.dataset.on==="1"), 0);
        const base = rootVar('--panelInterferenceBase');
        const step = rootVar('--panelInterferenceStep');
        if(panelLight) panelLight.style.opacity = (base + step * k).toFixed(2);
      }

      ledEls.forEach((el,i)=>{
        el.addEventListener('click', ()=>{
          el.dataset.on = (el.dataset.on === '1') ? '0' : '1';
          leds[i].dataset.on = el.dataset.on;
          updatePanelLight();
          if(typeof window.applyBG === 'function') window.applyBG();
        });
      });

      updatePanelLight();
      if(typeof window.applyBG === 'function') window.applyBG();
    })();
  </script>

  <script>
    /* LED -> Background */
    function setLayer(v, on){
      if(!v) return;
      v.style.visibility = on ? "visible" : "hidden";
      v.style.opacity = on ? "" : "0";
      if(on){ v.play().catch(()=>{}); } else { try{ v.pause(); }catch(e){} }
    }
    const sand = document.querySelector('.sandGlass');

    function applyBG(){
      const sandOn = (window.leds?.[0]?.dataset?.on === "1");
      const led2On  = (window.leds?.[1]?.dataset?.on === "1");
      const led3On  = (window.leds?.[2]?.dataset?.on === "1");

      if(sand) sand.style.display = sandOn ? "block" : "none";

      setLayer(vMilk, led2On);
      setLayer(vM, led2On);
      setLayer(vC, led2On);
      setLayer(vY, led2On);

      setLayer(ambient, led3On);
      setLayer(bloomOv, led3On);

      window.softSync && window.softSync();
    }
    window.applyBG = applyBG;
    applyBG();
  </script>

  <script src="js/share.js?v=1"></script>
  <script src="js/qr.js?v=1"></script>
</body>
</html>
